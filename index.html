<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameTorrent - Лучшие игры через торрент</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: #0f0f1b;
            color: #ffffff;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Шапка */
        header {
            background: #1a1a2e;
            padding: 20px 0;
            border-bottom: 2px solid #ff2a6d;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #ff2a6d;
        }
        
        .logo span {
            color: #05d9e8;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 30px;
            align-items: center;
        }
        
        nav a {
            color: #ffffff;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        nav a:hover {
            color: #05d9e8;
        }

        .auth-buttons {
            display: flex;
            gap: 15px;
        }

        .auth-btn {
            padding: 8px 20px;
            background: #2d2d44;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            text-decoration: none;
        }

        .auth-btn:hover {
            background: #ff2a6d;
            transform: translateY(-2px);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #05d9e8;
        }

        .logout-btn {
            padding: 5px 12px;
            background: transparent;
            color: #ff2a6d;
            border: 1px solid #ff2a6d;
            border-radius: 15px;
            cursor: pointer;
            font-size: 12px;
        }

        .logout-btn:hover {
            background: #ff2a6d;
            color: white;
        }
        
        .search-bar {
            display: flex;
            margin-top: 15px;
        }
        
        .search-bar input {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 5px 0 0 5px;
            background: #2d2d44;
            color: #ffffff;
            font-size: 16px;
        }
        
        .search-bar button {
            padding: 12px 20px;
            background: #ff2a6d;
            color: white;
            border: none;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }
        
        .search-bar button:hover {
            background: #e0245e;
        }
        
        /* Основной контент */
        main {
            padding: 40px 0;
        }
        
        .hero {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            padding: 60px 0;
            text-align: center;
            border-radius: 15px;
            margin-bottom: 50px;
            border: 1px solid #2d2d44;
        }
        
        .hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
            color: #05d9e8;
            text-shadow: 0 0 10px rgba(5, 217, 232, 0.3);
        }
        
        .hero p {
            font-size: 20px;
            max-width: 600px;
            margin: 0 auto 30px;
            color: #a5a5c7;
        }
        
        .btn {
            display: inline-block;
            padding: 15px 30px;
            background: #ff2a6d;
            color: white;
            border-radius: 8px;
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        
        .btn:hover {
            background: #e0245e;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 42, 109, 0.3);
        }
        
        .section-title {
            font-size: 32px;
            margin-bottom: 30px;
            color: #05d9e8;
            text-align: center;
            position: relative;
        }
        
        .section-title::after {
            content: '';
            display: block;
            width: 100px;
            height: 3px;
            background: #ff2a6d;
            margin: 10px auto;
            border-radius: 2px;
        }
        
        /* Сетка игр */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .game-card {
            background: #1a1a2e;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid #2d2d44;
            position: relative;
        }
        
        .game-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
            border-color: #05d9e8;
        }
        
        .game-img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 2px solid #ff2a6d;
        }
        
        .game-info {
            padding: 20px;
        }
        
        .game-title {
            font-size: 20px;
            margin-bottom: 10px;
            color: #05d9e8;
            font-weight: bold;
        }
        
        .game-meta {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: #a5a5c7;
            margin-bottom: 10px;
        }
        
        .game-size {
            color: #ff2a6d;
            font-weight: bold;
        }

        .game-genre {
            background: #05d9e8;
            color: #0f0f1b;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .game-description {
            color: #ccccdd;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 15px;
            min-height: 60px;
        }

        /* Статистика игры */
        .game-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        .rating {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .stars {
            color: #ffd700;
        }
        
        .downloads {
            color: #a5a5c7;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .download-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background: #2d2d44;
            color: white;
            border: none;
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            text-decoration: none;
        }
        
        .download-btn:hover {
            background: #ff2a6d;
            transform: translateY(-2px);
        }

        /* Рейтинг сайта */
        .site-rating {
            background: #1a1a2e;
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
            border: 1px solid #05d9e8;
        }

        .site-rating h3 {
            color: #05d9e8;
            margin-bottom: 15px;
            font-size: 24px;
            text-align: center;
        }

        .rating-container {
            display: flex;
            gap: 30px;
        }

        .rating-stats {
            flex: 1;
            text-align: center;
        }

        .rating-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .rating-stars {
            font-size: 32px;
            color: #ffd700;
        }

        .rating-number {
            font-size: 36px;
            font-weight: bold;
            color: #ff2a6d;
        }

        .rating-votes {
            color: #a5a5c7;
            font-size: 16px;
        }

        .comments-section {
            flex: 1;
            max-height: 300px;
            overflow-y: auto;
        }

        .comments-title {
            color: #05d9e8;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .comment {
            background: #2d2d44;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 3px solid #ff2a6d;
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .comment-author {
            color: #05d9e8;
            font-weight: bold;
        }

        .comment-rating {
            color: #ffd700;
            font-size: 14px;
        }

        .comment-text {
            color: #ccccdd;
            font-size: 14px;
        }

        .no-comments {
            color: #a5a5c7;
            text-align: center;
            font-style: italic;
            padding: 20px;
        }

        .rate-buttons {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .rate-btn {
            padding: 8px 16px;
            background: #2d2d44;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .rate-btn:hover {
            background: #ff2a6d;
            transform: translateY(-2px);
        }

        .rate-btn:disabled {
            background: #1a1a2e;
            color: #666687;
            cursor: not-allowed;
            transform: none;
        }

        .already-rated {
            color: #05d9e8;
            margin-top: 10px;
            font-size: 14px;
            text-align: center;
        }

        .rating-info {
            color: #a5a5c7;
            font-size: 14px;
            margin-top: 10px;
            text-align: center;
        }

        .comment-form {
            margin-top: 20px;
            padding: 15px;
            background: #2d2d44;
            border-radius: 8px;
        }

        .comment-input {
            width: 100%;
            padding: 10px;
            background: #1a1a2e;
            border: 1px solid #05d9e8;
            border-radius: 5px;
            color: white;
            margin-bottom: 10px;
            resize: vertical;
            min-height: 60px;
        }

        .comment-submit {
            padding: 8px 20px;
            background: #05d9e8;
            color: #0f0f1b;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .comment-submit:hover {
            background: #04c0d0;
        }

        .comment-submit:disabled {
            background: #2d2d44;
            color: #666687;
            cursor: not-allowed;
        }
        
        /* Категории */
        .categories {
            margin: 60px 0;
        }
        
        .categories-list {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }
        
        .category {
            padding: 12px 25px;
            background: #2d2d44;
            border-radius: 25px;
            color: #ffffff;
            text-decoration: none;
            transition: all 0.3s;
            border: 1px solid transparent;
        }
        
        .category:hover {
            background: #ff2a6d;
            transform: translateY(-2px);
            border-color: #05d9e8;
        }

        /* Модальные окна */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
        }

        .modal-content {
            background: #1a1a2e;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            border: 2px solid #05d9e8;
            position: relative;
        }

        .close {
            color: #ff2a6d;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 15px;
            top: 10px;
        }

        .close:hover {
            color: #e0245e;
        }

        .modal h2 {
            color: #05d9e8;
            margin-bottom: 20px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #a5a5c7;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            background: #2d2d44;
            border: 1px solid #05d9e8;
            border-radius: 5px;
            color: white;
            font-size: 16px;
        }

        .form-group input:focus {
            outline: none;
            border-color: #ff2a6d;
        }

        .submit-btn {
            width: 100%;
            padding: 12px;
            background: #ff2a6d;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background 0.3s;
        }

        .submit-btn:hover {
            background: #e0245e;
        }

        .auth-switch {
            text-align: center;
            margin-top: 20px;
            color: #a5a5c7;
        }

        .auth-switch a {
            color: #05d9e8;
            text-decoration: none;
        }

        .auth-switch a:hover {
            text-decoration: underline;
        }
        
        /* Подвал */
        footer {
            background: #1a1a2e;
            padding: 50px 0 20px;
            margin-top: 80px;
            border-top: 2px solid #ff2a6d;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .footer-section h3 {
            font-size: 20px;
            margin-bottom: 20px;
            color: #05d9e8;
        }
        
        .footer-section p {
            color: #a5a5c7;
            line-height: 1.6;
        }
        
        .footer-section ul {
            list-style: none;
        }
        
        .footer-section ul li {
            margin-bottom: 10px;
        }
        
        .footer-section a {
            color: #a5a5c7;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-section a:hover {
            color: #05d9e8;
        }
        
        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid #2d2d44;
            color: #666687;
            font-size: 14px;
        }
        
        /* Адаптивность */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            nav ul {
                gap: 15px;
                flex-direction: column;
            }

            .auth-buttons {
                justify-content: center;
            }
            
            .hero h1 {
                font-size: 36px;
            }
            
            .hero p {
                font-size: 18px;
            }
            
            .games-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }
            
            .categories-list {
                gap: 10px;
            }
            
            .category {
                padding: 10px 20px;
                font-size: 14px;
            }

            .rating-display {
                flex-direction: column;
                gap: 10px;
            }

            .rating-container {
                flex-direction: column;
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Модальные окна -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('loginModal')">&times;</span>
            <h2>Вход в аккаунт</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email:</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Пароль:</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="submit-btn">Войти</button>
            </form>
            <div class="auth-switch">
                Нет аккаунта? <a href="#" onclick="showRegister()">Зарегистрироваться</a>
            </div>
        </div>
    </div>

    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('registerModal')">&times;</span>
            <h2>Регистрация</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="regUsername">Имя пользователя:</label>
                    <input type="text" id="regUsername" required>
                </div>
                <div class="form-group">
                    <label for="regEmail">Email:</label>
                    <input type="email" id="regEmail" required>
                </div>
                <div class="form-group">
                    <label for="regPassword">Пароль:</label>
                    <input type="password" id="regPassword" required>
                </div>
                <button type="submit" class="submit-btn">Зарегистрироваться</button>
            </form>
            <div class="auth-switch">
                Уже есть аккаунт? <a href="#" onclick="showLogin()">Войти</a>
            </div>
        </div>
    </div>

    <!-- Шапка сайта -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">Game<span>Torrent</span></div>
                <nav>
                    <ul>
                        <li><a href="#home">Главная</a></li>
                        <li><a href="#games">Игры</a></li>
                        <li><a href="#categories">Категории</a></li>
                        <div class="auth-buttons" id="authButtons">
                            <a href="#" class="auth-btn" onclick="showLogin()">Войти</a>
                            <a href="#" class="auth-btn" onclick="showRegister()">Регистрация</a>
                        </div>
                        <div class="user-info" id="userInfo" style="display: none;">
                            <span id="userName">Пользователь</span>
                            <button class="logout-btn" onclick="logout()">Выйти</button>
                        </div>
                    </ul>
                </nav>
            </div>
            <div class="search-bar">
                <input type="text" placeholder="Поиск игр..." id="searchInput">
                <button onclick="searchGames()">Найти</button>
            </div>
        </div>
    </header>

    <!-- Основной контент -->
    <main class="container">
        <!-- Герой-секция -->
        <section class="hero" id="home">
            <h1>Лучшие игры через торрент</h1>
            <p>Скачивайте новейшие игры бесплатно и безопасно. У нас только проверенные раздачи с высокой скоростью загрузки.</p>
            <a href="#games" class="btn">Смотреть все игры</a>
        </section>

        <!-- Рейтинг сайта -->
        <section class="site-rating">
            <h3>⭐ РЕЙТИНГ НАШЕГО САЙТА</h3>
            <div class="rating-container">
                <div class="rating-stats">
                    <div class="rating-display">
                        <div class="rating-stars" id="siteStars">★★★★★</div>
                        <div class="rating-number" id="siteRating">5.0</div>
                        <div class="rating-votes" id="siteVotes">0 голосов</div>
                    </div>
                    <div class="rating-info" id="ratingInfo">
                        Общий рейтинг сайта от всех пользователей
                    </div>
                    
                    <div id="rateSection">
                        <div class="rate-buttons" id="rateButtons">
                            <button class="rate-btn" onclick="rateSite(5)">⭐ 5 - Отлично!</button>
                            <button class="rate-btn" onclick="rateSite(4)">⭐ 4 - Хорошо</button>
                            <button class="rate-btn" onclick="rateSite(3)">⭐ 3 - Нормально</button>
                            <button class="rate-btn" onclick="rateSite(2)">⭐ 2 - Плохо</button>
                            <button class="rate-btn" onclick="rateSite(1)">⭐ 1 - Ужасно</button>
                        </div>
                        <div class="already-rated" id="alreadyRated" style="display: none;">
                            Вы уже оценили наш сайт! Спасибо! ❤️
                        </div>
                        <div class="rating-info" id="userRatingInfo" style="display: none;">
                            Ваша оценка: <span id="userRatingValue"></span>
                        </div>
                    </div>

                    <div id="authRequired" style="display: none; text-align: center; margin-top: 20px;">
                        <p style="color: #ff2a6d; margin-bottom: 10px;">Для оценки сайта требуется авторизация</p>
                        <button class="auth-btn" onclick="showLogin()">Войти</button>
                    </div>
                </div>

                <div class="comments-section">
                    <div class="comments-title">Последние отзывы</div>
                    <div id="commentsList">
                        <div class="no-comments">Пока нет отзывов. Будьте первым!</div>
                    </div>
                    
                    <div class="comment-form" id="commentForm" style="display: none;">
                        <textarea class="comment-input" id="commentText" placeholder="Оставьте ваш отзыв..."></textarea>
                        <button class="comment-submit" onclick="submitComment()">Отправить отзыв</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Популярные игры -->
        <section class="popular-games" id="games">
            <h2 class="section-title">Популярные игры</h2>
            <div class="games-grid" id="gamesGrid">
                <!-- Игры будут добавлены через JavaScript -->
            </div>
        </section>

        <!-- Категории -->
        <section class="categories" id="categories">
            <h2 class="section-title">Категории игр</h2>
            <div class="categories-list">
                <a href="#" class="category" onclick="filterByCategory('all')">Все игры</a>
                <a href="#" class="category" onclick="filterByCategory('Экшен')">Экшен</a>
                <a href="#" class="category" onclick="filterByCategory('RPG')">RPG</a>
                <a href="#" class="category" onclick="filterByCategory('Стратегии')">Стратегии</a>
                <a href="#" class="category" onclick="filterByCategory('Шутеры')">Шутеры</a>
                <a href="#" class="category" onclick="filterByCategory('Приключения')">Приключения</a>
                <a href="#" class="category" onclick="filterByCategory('Гонки')">Гонки</a>
                <a href="#" class="category" onclick="filterByCategory('Симуляторы')">Симуляторы</a>
                <a href="#" class="category" onclick="filterByCategory('Инди')">Инди</a>
                <a href="#" class="category" onclick="filterByCategory('Хоррор')">Хоррор</a>
                <a href="#" class="category" onclick="filterByCategory('Спорт')">Спорт</a>
            </div>
        </section>
    </main>

    <!-- Подвал -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>GameTorrent</h3>
                    <p>Лучший сайт для скачивания игр через торрент. Быстро, безопасно и бесплатно.</p>
                </div>
                <div class="footer-section">
                    <h3>Категории</h3>
                    <ul>
                        <li><a href="#" onclick="filterByCategory('Экшен')">Экшен</a></li>
                        <li><a href="#" onclick="filterByCategory('RPG')">RPG</a></li>
                        <li><a href="#" onclick="filterByCategory('Стратегии')">Стратегии</a></li>
                        <li><a href="#" onclick="filterByCategory('Шутеры')">Шутеры</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Полезные ссылки</h3>
                    <ul>
                        <li><a href="#">Как скачивать</a></li>
                        <li><a href="#">Частые вопросы</a></li>
                        <li><a href="#">Правила сайта</a></li>
                        <li><a href="#">Контакты</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 GameTorrent. Все права защищены. Все игры представлены для ознакомления.</p>
            </div>
        </div>
    </footer>

    <script>
        // Данные игр с жанрами
        const gamesData = [
            {
                id: 'cyberpunk',
                name: 'Cyberpunk 2077',
                year: 2020,
                size: '65.2 GB',
                genre: 'RPG',
                description: 'Ролевая игра в открытом мире от создателей The Witcher.',
                image: 'images/Обложка_компьютерной_игры_Cyberpunk_2077.jpg',
                torrent: 'torrents/cyberpunk-2077.torrent',
                rating: '4.8/5'
            },
            {
                id: 'elden',
                name: 'Elden Ring',
                year: 2022,
                size: '48.3 GB',
                genre: 'RPG',
                description: 'Фэнтезийная ролевая игра от создателей Dark Souls.',
                image: 'images/Elden_Ring_-_cover.jpg',
                torrent: 'torrents/Elden-Ring-by-Igruha.torrent',
                rating: '4.9/5'
            },
            {
                id: 'witcher',
                name: 'The Witcher 3: Wild Hunt',
                year: 2015,
                size: '35.1 GB',
                genre: 'RPG',
                description: 'Эпическая ролевая игра в фэнтезийном мире.',
                image: 'images/The_Witcher_3-_Wild_Hunt_Cover.jpg',
                torrent: 'torrents/The-Witcher-3-Wild-Hunt-Complete-Edition-by-Igruha.torrent',
                rating: '4.9/5'
            },
            {
                id: 'reddead',
                name: 'Red Dead Redemption 2',
                year: 2019,
                size: '109 GB',
                genre: 'Приключения',
                description: 'Приключенческий вестерн от создателей GTA V.',
                image: 'images/Red_Dead_Redemption_2_coverart.jpg',
                torrent: 'torrents/red-dead-redemption-2-by-xatab.torrent',
                rating: '4.8/5'
            },
            {
                id: 'metalgear',
                name: 'Metal Gear Rising: Revengeance',
                year: 2013,
                size: '25 GB',
                genre: 'Экшен',
                description: 'Экшен с механикой разрезания всего на части. РЕЖИ И РУБИ!',
                image: 'images/Metal_Gear_Rising_Revengeance_box_artwork.jpg',
                torrent: 'torrents/Metal-Gear-Rising-Revengeance-by-Igruha.torrent',
                rating: '4.5/5'
            },
            {
                id: 'devilmaycry',
                name: 'Devil May Cry 5',
                year: 2019,
                size: '35 GB',
                genre: 'Экшен',
                description: 'Культовый слэшер с тремя протагонистами. СТИЛЬНЫЕ КОМБО!',
                image: 'images/DevilMayCry5.jpg',
                torrent: 'torrents/Devil-May-Cry-5-by-Igruha.torrent',
                rating: '4.6/5'
            },
            {
                id: 'counterstrike',
                name: 'Counter-Strike 1.6',
                year: 2003,
                size: '0.5 GB',
                genre: 'Шутеры',
                description: 'Культовый тактический шутер. ЛЕГЕНДА КИБЕРСПОРТА!',
                image: 'images/Counter-Strike_Box_1.jpg',
                torrent: 'torrents/Counter-strike-1.6.torrent',
                rating: '4.3/5'
            },
            {
                id: 'left4dead',
                name: 'Left 4 Dead 2',
                year: 2009,
                size: '8 GB',
                genre: 'Шутеры',
                description: 'Кооперативный зомби-шутер от Valve.',
                image: 'images/capsule_616x353.jpg',
                torrent: 'torrents/Left-4-Dead-2-by-Igruha.torrent',
                rating: '4.4/5'
            },
            {
                id: 'halflife',
                name: 'Half-Life',
                year: 1998,
                size: '0.5 GB',
                genre: 'Шутеры',
                description: 'ЛЕГЕНДАРНЫЙ ШУТЕР ОТ VALVE! Начало истории Гордона Фримена.',
                image: 'images/capsule_616x354.jpg',
                torrent: 'torrents/Half-Life.torrent',
                rating: '4.2/5'
            },
            {
                id: 'halflife2',
                name: 'Half-Life 2',
                year: 2004,
                size: '4.5 GB',
                genre: 'Шутеры',
                description: 'ШЕДЕВР ОТ VALVE! Продолжение легенды с гравипушкой!',
                image: 'images/HL2box.jpg',
                torrent: 'torrents/Half-Life-2-Complete-Edition-by-Igruha.torrent',
                rating: '4.8/5'
            }
        ];

        // Глобальные переменные
        let siteStats = {
            totalRating: 0,
            voteCount: 0,
            averageRating: 0,
            userRatings: {},
            comments: []
        };

        let gameDownloads = {};
        let currentUser = null;
        let users = [];

        // Инициализация данных
        const initializeData = () => {
            gamesData.forEach(game => {
                gameDownloads[game.id] = 0;
            });

            try {
                const savedStats = localStorage.getItem('gameTorrentSiteRating');
                const savedDownloads = localStorage.getItem('gameTorrentDownloads');
                const savedUsers = localStorage.getItem('gameTorrentUsers');
                const currentUserData = localStorage.getItem('gameTorrentCurrentUser');
                
                if (savedStats) {
                    const parsed = JSON.parse(savedStats);
                    siteStats = {...siteStats, ...parsed};
                }
                if (savedDownloads) {
                    const parsed = JSON.parse(savedDownloads);
                    gameDownloads = {...gameDownloads, ...parsed};
                }
                if (savedUsers) {
                    users = JSON.parse(savedUsers);
                }
                if (currentUserData) {
                    currentUser = JSON.parse(currentUserData);
                }
            } catch (e) {
                console.log('Ошибка загрузки данных');
            }
        };

        // Сохранение данных
        const saveData = () => {
            try {
                localStorage.setItem('gameTorrentSiteRating', JSON.stringify(siteStats));
                localStorage.setItem('gameTorrentDownloads', JSON.stringify(gameDownloads));
                localStorage.setItem('gameTorrentUsers', JSON.stringify(users));
                if (currentUser) {
                    localStorage.setItem('gameTorrentCurrentUser', JSON.stringify(currentUser));
                }
            } catch (e) {
                console.log('Не удалось сохранить данные');
            }
        };

        // Отображение игр
        const renderGames = (games = gamesData) => {
            const gamesGrid = document.getElementById('gamesGrid');
            gamesGrid.innerHTML = '';

            games.forEach(game => {
                const gameCard = `
                    <div class="game-card" data-game="${game.id}">
                        <img src="${game.image}" alt="${game.name}" class="game-img">
                        <div class="game-info">
                            <h3 class="game-title">${game.name}</h3>
                            <div class="game-meta">
                                <span class="game-year">${game.year}</span>
                                <span class="game-genre">${game.genre}</span>
                                <span class="game-size">${game.size}</span>
                            </div>
                            <p class="game-description">${game.description}</p>
                            <div class="game-stats">
                                <div class="rating">
                                    <span class="stars">${getStarsFromRating(game.rating)}</span>
                                    <span>${game.rating}</span>
                                </div>
                                <div class="downloads">
                                    <span>📥 <span id="downloads-${game.id}">${gameDownloads[game.id] || 0}</span></span>
                                </div>
                            </div>
                            <a href="#" class="download-btn" onclick="return downloadGame('${game.id}')">Скачать торрент</a>
                        </div>
                    </div>
                `;
                gamesGrid.innerHTML += gameCard;
            });
        };

        // Функция для получения звезд из рейтинга
        const getStarsFromRating = (rating) => {
            const num = parseFloat(rating);
            const fullStars = Math.floor(num);
            const hasHalfStar = num % 1 >= 0.5;
            let stars = '★'.repeat(fullStars);
            if (hasHalfStar) stars += '½';
            stars += '☆'.repeat(5 - fullStars - (hasHalfStar ? 1 : 0));
            return stars;
        };

        // Функция для получения правильного окончания для слова "голос"
        const getVotesText = (count) => {
            if (count === 0) return 'голосов';
            if (count % 10 === 1 && count % 100 !== 11) return 'голос';
            if (count % 10 >= 2 && count % 10 <= 4 && (count % 100 < 10 || count % 100 >= 20)) return 'голоса';
            return 'голосов';
        };

        // Генерация звезд рейтинга
        const getStars = (rating) => {
            if (rating === 0) return '☆☆☆☆☆';
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            let stars = '★'.repeat(fullStars);
            if (hasHalfStar) stars += '½';
            stars += '☆'.repeat(5 - fullStars - (hasHalfStar ? 1 : 0));
            return stars;
        };

        // Функция создания и скачивания торрент-файла
        const createTorrentFile = (gameName, gameId) => {
            const torrentContent = `d8:announce41:http://tracker.gametorrent.com:8080/announce13:announce-listll41:http://tracker.gametorrent.com:8080/announceel44:udp://tracker.gametorrent.com:8080/announceee7:comment35:Downloaded from GameTorrent - Best Games!10:created by13:GameTorrent v1.013:creation datei${Math.floor(Date.now() / 1000)}e8:encoding5:UTF-84:infod6:lengthi${getGameSize(gameId)}e4:name${gameName.length}:${gameName}12:piece lengthi262144e6:pieces20:aaaaaaaaaaaaaaaaaaaaee`;
            
            const blob = new Blob([torrentContent], { type: 'application/x-bittorrent' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `${gameName}.torrent`;
            document.body.appendChild(a);
            a.click();
            
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
        };

        // Функция для получения размера игры в байтах
        const getGameSize = (gameId) => {
            const sizes = {
                cyberpunk: 65.2 * 1024 * 1024 * 1024,
                elden: 48.3 * 1024 * 1024 * 1024,
                witcher: 35.1 * 1024 * 1024 * 1024,
                reddead: 109 * 1024 * 1024 * 1024,
                metalgear: 25 * 1024 * 1024 * 1024,
                devilmaycry: 35 * 1024 * 1024 * 1024,
                counterstrike: 0.5 * 1024 * 1024 * 1024,
                left4dead: 8 * 1024 * 1024 * 1024,
                halflife: 0.5 * 1024 * 1024 * 1024,
                halflife2: 4.5 * 1024 * 1024 * 1024
            };
            return sizes[gameId] || 1024 * 1024 * 1024;
        };

        // Функция скачивания игры
        const downloadGame = (gameId) => {
            if (gameDownloads[gameId] !== undefined) {
                gameDownloads[gameId]++;
                
                saveData();
                updateStats();

                const game = gamesData.find(g => g.id === gameId);
                const gameName = game.name;
                
                alert(`Начинается скачивание "${gameName}"! 🎮\nСкачано раз: ${gameDownloads[gameId]}`);
                
                createTorrentFile(gameName, gameId);
            }

            return false;
        };

        // Обновление статистики на странице
        const updateStats = () => {
            // Обновляем счетчики скачиваний
            Object.keys(gameDownloads).forEach(game => {
                const element = document.getElementById(`downloads-${game}`);
                if (element) {
                    element.textContent = gameDownloads[game];
                }
            });

            // Обновляем рейтинг сайта
            const ratingElement = document.getElementById('siteRating');
            const votesElement = document.getElementById('siteVotes');
            const starsElement = document.getElementById('siteStars');
            
            if (ratingElement) ratingElement.textContent = siteStats.averageRating.toFixed(1);
            if (votesElement) votesElement.textContent = `${siteStats.voteCount} ${getVotesText(siteStats.voteCount)}`;
            if (starsElement) starsElement.innerHTML = getStars(siteStats.averageRating);

            // Обновляем комментарии
            updateComments();

            // Обновляем интерфейс в зависимости от авторизации
            updateAuthUI();
        };

        // Обновление комментариев
        const updateComments = () => {
            const commentsList = document.getElementById('commentsList');
            commentsList.innerHTML = '';

            if (siteStats.comments.length === 0) {
                commentsList.innerHTML = '<div class="no-comments">Пока нет отзывов. Будьте первым!</div>';
                return;
            }

            // Показываем последние 5 комментариев
            const recentComments = siteStats.comments.slice(-5).reverse();
            
            recentComments.forEach(comment => {
                const commentElement = `
                    <div class="comment">
                        <div class="comment-header">
                            <span class="comment-author">${comment.username}</span>
                            <span class="comment-rating">${'★'.repeat(comment.rating)}${'☆'.repeat(5-comment.rating)}</span>
                        </div>
                        <div class="comment-text">${comment.text}</div>
                    </div>
                `;
                commentsList.innerHTML += commentElement;
            });
        };

        // Обновление UI в зависимости от авторизации
        const updateAuthUI = () => {
            const authButtons = document.getElementById('authButtons');
            const userInfo = document.getElementById('userInfo');
            const userName = document.getElementById('userName');
            const rateSection = document.getElementById('rateSection');
            const authRequired = document.getElementById('authRequired');
            const commentForm = document.getElementById('commentForm');

            if (currentUser) {
                authButtons.style.display = 'none';
                userInfo.style.display = 'flex';
                userName.textContent = currentUser.username;
                rateSection.style.display = 'block';
                authRequired.style.display = 'none';
                commentForm.style.display = 'block';

                // Проверяем, оценил ли уже пользователь
                if (siteStats.userRatings[currentUser.id]) {
                    const buttons = document.querySelectorAll('.rate-btn');
                    buttons.forEach(btn => {
                        btn.disabled = true;
                        btn.style.background = '#1a1a2e';
                        btn.style.color = '#666687';
                        btn.style.cursor = 'not-allowed';
                    });
                    document.getElementById('alreadyRated').style.display = 'block';
                    document.getElementById('userRatingInfo').style.display = 'block';
                    document.getElementById('userRatingValue').textContent = siteStats.userRatings[currentUser.id] + ' звезд';
                } else {
                    document.getElementById('alreadyRated').style.display = 'none';
                    document.getElementById('userRatingInfo').style.display = 'none';
                }
            } else {
                authButtons.style.display = 'flex';
                userInfo.style.display = 'none';
                rateSection.style.display = 'none';
                authRequired.style.display = 'block';
                commentForm.style.display = 'none';
            }
        };

        // Функция оценки сайта
        const rateSite = (rating) => {
            if (!currentUser) {
                alert('Для оценки сайта требуется авторизация!');
                showLogin();
                return;
            }

            if (siteStats.userRatings[currentUser.id]) {
                alert('Вы уже оценили наш сайт! Спасибо! ❤️');
                return;
            }
            
            siteStats.userRatings[currentUser.id] = rating;
            
            const ratings = Object.values(siteStats.userRatings);
            siteStats.totalRating = ratings.reduce((sum, r) => sum + r, 0);
            siteStats.voteCount = ratings.length;
            siteStats.averageRating = siteStats.totalRating / siteStats.voteCount;
            
            saveData();
            updateStats();
            
            alert(`Спасибо за вашу оценку ${rating} звезд! ⭐\nТеперь вы не сможете изменить оценку!\n\nОбщий рейтинг сайта: ${siteStats.averageRating.toFixed(1)}/5`);
        };

        // Функция отправки комментария
        const submitComment = () => {
            if (!currentUser) {
                alert('Для отправки отзыва требуется авторизация!');
                showLogin();
                return;
            }

            const commentText = document.getElementById('commentText').value.trim();
            if (!commentText) {
                alert('Введите текст отзыва!');
                return;
            }

            const userRating = siteStats.userRatings[currentUser.id];
            if (!userRating) {
                alert('Сначала оцените сайт!');
                return;
            }

            const comment = {
                username: currentUser.username,
                rating: userRating,
                text: commentText,
                date: new Date().toLocaleDateString()
            };

            siteStats.comments.push(comment);
            saveData();
            updateStats();

            document.getElementById('commentText').value = '';
            alert('Спасибо за ваш отзыв! ❤️');
        };

        // Функции для модальных окон
        const showLogin = () => {
            document.getElementById('loginModal').style.display = 'block';
        };

        const showRegister = () => {
            document.getElementById('registerModal').style.display = 'block';
        };

        const closeModal = (modalId) => {
            document.getElementById(modalId).style.display = 'none';
        };

        // Регистрация
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('regUsername').value.trim();
            const email = document.getElementById('regEmail').value.trim();
            const password = document.getElementById('regPassword').value.trim();

            if (users.find(user => user.email === email)) {
                alert('Пользователь с таким email уже существует!');
                return;
            }

            const newUser = {
                id: 'user_' + Math.random().toString(36).substr(2, 9),
                username: username,
                email: email,
                password: password
            };

            users.push(newUser);
            currentUser = newUser;
            saveData();
            updateAuthUI();
            closeModal('registerModal');
            
            alert(`Добро пожаловать, ${username}! 🎮`);
        });

        // Вход
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value.trim();

            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                saveData();
                updateAuthUI();
                closeModal('loginModal');
                alert(`С возвращением, ${user.username}! 🎮`);
            } else {
                alert('Неверный email или пароль!');
            }
        });

        // Выход
        const logout = () => {
            currentUser = null;
            saveData();
            updateAuthUI();
            alert('Вы вышли из аккаунта!');
        };

        // Поиск игр
        const searchGames = () => {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            
            if (!searchTerm) {
                renderGames();
                return;
            }

            const filteredGames = gamesData.filter(game => 
                game.name.toLowerCase().includes(searchTerm) ||
                game.genre.toLowerCase().includes(searchTerm) ||
                game.description.toLowerCase().includes(searchTerm)
            );

            renderGames(filteredGames);
        };

        // Фильтрация по категориям
        const filterByCategory = (category) => {
            if (category === 'all') {
                renderGames();
                return;
            }

            const filteredGames = gamesData.filter(game => game.genre === category);
            renderGames(filteredGames);
        };

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', () => {
            initializeData();
            renderGames();
            updateStats();
            updateAuthUI();

            // Обработка нажатия Enter в поиске
            document.getElementById('searchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchGames();
                }
            });

            // Плавная прокрутка
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });
    </script>
</body>
</html>
